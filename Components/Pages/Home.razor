@page "/"
@attribute [Authorize]
@using Microsoft.AspNetCore.Identity
@using Microsoft.AspNetCore.Components.Authorization
@using Microsoft.AspNetCore.Authorization
@using Microsoft.JSInterop
@inject SignInManager<IdentityUser> SignInManager
@inject NavigationManager Navigation
@inject IJSRuntime JSRuntime

<PageTitle>Trang chủ</PageTitle>

<MudContainer MaxWidth="MaxWidth.ExtraExtraLarge" Class="mt-4">
    <MudStack Spacing="4">
        <!-- Header -->
        <MudPaper Class="pa-4" Elevation="2">
            <MudStack Row Justify="Justify.SpaceBetween" AlignItems="AlignItems.Center">
                <MudStack Row AlignItems="AlignItems.Center">
                    <MudIcon Icon="@Icons.Material.Filled.School" Size="Size.Large" Color="Color.Primary" />
                    <MudText Typo="Typo.h4" Color="Color.Primary" Class="ml-2">
                        Hệ thống Đăng ký Học phần
                    </MudText>
                </MudStack>
                
                <MudStack Row AlignItems="AlignItems.Center" Spacing="2">
                    <MudChip T="string" Icon="@Icons.Material.Filled.Person" Color="Color.Success" Size="Size.Small">
                        Xin chào, Admin!
                    </MudChip>
                    <MudButton Variant="Variant.Outlined" 
                              Color="Color.Secondary" 
                              Size="Size.Small"
                              StartIcon="@Icons.Material.Filled.Logout"
                              OnClick="HandleLogout">
                        Đăng xuất
                    </MudButton>
                </MudStack>
            </MudStack>
        </MudPaper>

        <!-- Welcome Card -->
        <MudPaper Class="pa-6" Elevation="1">
            <MudStack Spacing="3">
                <MudText Typo="Typo.h5" Color="Color.Primary">
                    <MudIcon Icon="@Icons.Material.Filled.Dashboard" Class="mr-2" />
                    Bảng điều khiển
                </MudText>
                
                <MudText Typo="Typo.body1" Color="Color.Secondary">
                    Chào mừng bạn đến với hệ thống quản lý đăng ký học phần. 
                    Từ đây bạn có thể quản lý sinh viên, giảng viên, môn học và các hoạt động đăng ký.
                </MudText>
            </MudStack>
        </MudPaper>

        <!-- Quick Stats -->
        <MudGrid>
            <MudItem xs="12" sm="6" md="3">
                <MudPaper Class="pa-4" Elevation="2">
                    <MudStack AlignItems="AlignItems.Center" Spacing="2">
                        <MudIcon Icon="@Icons.Material.Filled.People" Size="Size.Large" Color="Color.Primary" />
                        <MudText Typo="Typo.h4" Color="Color.Primary">150</MudText>
                        <MudText Typo="Typo.body2" Color="Color.Secondary">Sinh viên</MudText>
                    </MudStack>
                </MudPaper>
            </MudItem>
            
            <MudItem xs="12" sm="6" md="3">
                <MudPaper Class="pa-4" Elevation="2">
                    <MudStack AlignItems="AlignItems.Center" Spacing="2">
                        <MudIcon Icon="@Icons.Material.Filled.Person" Size="Size.Large" Color="Color.Secondary" />
                        <MudText Typo="Typo.h4" Color="Color.Secondary">25</MudText>
                        <MudText Typo="Typo.body2" Color="Color.Secondary">Giảng viên</MudText>
                    </MudStack>
                </MudPaper>
            </MudItem>
            
            <MudItem xs="12" sm="6" md="3">
                <MudPaper Class="pa-4" Elevation="2">
                    <MudStack AlignItems="AlignItems.Center" Spacing="2">
                        <MudIcon Icon="@Icons.Material.Filled.Book" Size="Size.Large" Color="Color.Tertiary" />
                        <MudText Typo="Typo.h4" Color="Color.Tertiary">45</MudText>
                        <MudText Typo="Typo.body2" Color="Color.Secondary">Môn học</MudText>
                    </MudStack>
                </MudPaper>
            </MudItem>
            
            <MudItem xs="12" sm="6" md="3">
                <MudPaper Class="pa-4" Elevation="2">
                    <MudStack AlignItems="AlignItems.Center" Spacing="2">
                        <MudIcon Icon="@Icons.Material.Filled.School" Size="Size.Large" Color="Color.Info" />
                        <MudText Typo="Typo.h4" Color="Color.Info">12</MudText>
                        <MudText Typo="Typo.body2" Color="Color.Secondary">Lớp học</MudText>
                    </MudStack>
                </MudPaper>
            </MudItem>
        </MudGrid>

        <!-- Quick Actions -->
        <MudPaper Class="pa-4" Elevation="1">
            <MudStack Spacing="3">
                <MudText Typo="Typo.h6" Color="Color.Primary">
                    <MudIcon Icon="@Icons.Material.Filled.Speed" Class="mr-2" />
                    Thao tác nhanh
                </MudText>
                
                <MudGrid>
                    <MudItem xs="12" sm="6" md="4">
                        <MudButton Variant="Variant.Filled" 
                                  Color="Color.Primary" 
                                  FullWidth="true"
                                  StartIcon="@Icons.Material.Filled.People"
                                  Size="Size.Large">
                            Quản lý Sinh viên
                        </MudButton>
                    </MudItem>
                    
                    <MudItem xs="12" sm="6" md="4">
                        <MudButton Variant="Variant.Filled" 
                                  Color="Color.Secondary" 
                                  FullWidth="true"
                                  StartIcon="@Icons.Material.Filled.Person"
                                  Size="Size.Large">
                            Quản lý Giảng viên
                        </MudButton>
                    </MudItem>
                    
                    <MudItem xs="12" sm="6" md="4">
                        <MudButton Variant="Variant.Filled" 
                                  Color="Color.Tertiary" 
                                  FullWidth="true"
                                  StartIcon="@Icons.Material.Filled.Book"
                                  Size="Size.Large">
                            Quản lý Môn học
                        </MudButton>
                    </MudItem>
                    
                    <MudItem xs="12" sm="6" md="4">
                        <MudButton Variant="Variant.Filled" 
                                  Color="Color.Info" 
                                  FullWidth="true"
                                  StartIcon="@Icons.Material.Filled.Schedule"
                                  Size="Size.Large">
                            Lịch học
                        </MudButton>
                    </MudItem>
                    
                    <MudItem xs="12" sm="6" md="4">
                        <MudButton Variant="Variant.Filled" 
                                  Color="Color.Success" 
                                  FullWidth="true"
                                  StartIcon="@Icons.Material.Filled.Assignment"
                                  Size="Size.Large">
                            Đăng ký học phần
                        </MudButton>
                    </MudItem>
                    
                    <MudItem xs="12" sm="6" md="4">
                        <MudButton Variant="Variant.Filled" 
                                  Color="Color.Warning" 
                                  FullWidth="true"
                                  StartIcon="@Icons.Material.Filled.Analytics"
                                  Size="Size.Large">
                            Báo cáo
                        </MudButton>
                    </MudItem>
                </MudGrid>
            </MudStack>
        </MudPaper>
    </MudStack>
</MudContainer>

@code {
    private void HandleLogout()
    {
        Navigation.NavigateTo("/logout", forceLoad: true);
    }
}