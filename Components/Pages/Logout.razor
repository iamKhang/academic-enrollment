@page "/logout"
@attribute [AllowAnonymous]
@using Microsoft.AspNetCore.Identity
@using Microsoft.AspNetCore.Authorization
@inject NavigationManager Navigation

<PageTitle>Đăng xuất</PageTitle>

<MudContainer MaxWidth="MaxWidth.Small" Class="mt-16">
    <MudPaper Class="pa-8" Elevation="3">
        <MudStack AlignItems="AlignItems.Center" Spacing="4">
            <MudIcon Icon="@Icons.Material.Filled.Logout" Size="Size.Large" Color="Color.Primary" />
            <MudText Typo="Typo.h5" Color="Color.Primary">Đang đăng xuất...</MudText>
            <MudProgressCircular Indeterminate="true" Color="Color.Primary" />
        </MudStack>
    </MudPaper>
</MudContainer>

@code {
    protected override void OnAfterRender(bool firstRender)
    {
        if (firstRender)
        {
            // Redirect to the logout endpoint (POST) by submitting a form
            Navigation.NavigateTo("/auth/logout", forceLoad: true);
        }
    }
}
