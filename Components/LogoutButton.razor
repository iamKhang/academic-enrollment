@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject NavigationManager Navigation

@if (isAuthenticated)
{
    <div class="logout-section">
        <span>Xin chào, @currentUser!</span>
        <button class="btn btn-outline-secondary btn-sm" @onclick="HandleLogout">
            Đăng xuất
        </button>
    </div>
}

@code {
    private bool isAuthenticated = false;
    private string currentUser = string.Empty;

    protected override async Task OnInitializedAsync()
    {
        var user = await SignInManager.GetTwoFactorAuthenticationUserAsync();
        if (user != null)
        {
            isAuthenticated = true;
            currentUser = user.UserName ?? "Admin";
        }
    }

    private async Task HandleLogout()
    {
        await SignInManager.SignOutAsync();
        Navigation.NavigateTo("/login", forceLoad: true);
    }
}

<style>
    .logout-section {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 0.5rem;
    }
    
    .btn {
        padding: 0.25rem 0.5rem;
        border: 1px solid #6c757d;
        background: transparent;
        color: #6c757d;
        border-radius: 4px;
        cursor: pointer;
        text-decoration: none;
    }
    
    .btn:hover {
        background-color: #6c757d;
        color: white;
    }
</style>
